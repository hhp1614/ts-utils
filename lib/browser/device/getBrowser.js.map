{"version":3,"file":"getBrowser.js","sourceRoot":"","sources":["../../../src/browser/device/getBrowser.ts"],"names":[],"mappings":";;;AAAA,iCAAgC;AAEhC,kBAAkB;AAClB,IAAM,MAAM,GAAG,UAAC,EAAU,EAAE,MAAc,IAAK,OAAA,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,EAAf,CAAe,CAAC;AAE/D,UAAU;AACV,IAAM,UAAU,GAAG,UAAC,EAAU,EAAE,MAAc,IAAK,OAAA,CAAA,KAAG,EAAE,CAAC,KAAK,CAAC,MAAM,CAAG,CAAA,CAAC,OAAO,CAAC,YAAY,EAAE,EAAE,CAAC,CAAC,OAAO,CAAC,IAAI,EAAE,GAAG,CAAC,EAAlE,CAAkE,CAAC;AAwBtH;;GAEG;AACH,SAAgB,UAAU;IACxB,YAAY;IACZ,IAAM,EAAE,GAAW,aAAK,EAAE,CAAC,WAAW,EAAE,CAAC;IACzC,KAAK;IACL,IAAM,MAAM,GAAqB;QAC/B,IAAI,EAAE,SAAS;QACf,OAAO,EAAE,SAAS;KACnB,CAAC;IACF,KAAK;IACL,IAAM,SAAS,GAAqB;QAClC,IAAI,EAAE,SAAS;QACf,OAAO,EAAE,SAAS;KACnB,CAAC;IACF,KAAK;IACL,IAAM,KAAK,GAAqB;QAC9B,IAAI,EAAE,SAAS;QACf,OAAO,EAAE,SAAS;KACnB,CAAC;IAEF,YAAY;IACZ,IAAI,MAAM,CAAC,EAAE,EAAE,cAAc,CAAC,EAAE;QAC9B,MAAM,CAAC,IAAI,GAAG,QAAQ,CAAC,CAAC,YAAY;QACpC,IAAI,MAAM,CAAC,EAAE,EAAE,OAAO,CAAC,EAAE;YACvB,SAAS,CAAC,IAAI,GAAG,MAAM,CAAC,CAAC,WAAW;SACrC;aAAM,IAAI,MAAM,CAAC,EAAE,EAAE,MAAM,CAAC,EAAE;YAC7B,SAAS,CAAC,IAAI,GAAG,OAAO,CAAC,CAAC,YAAY;SACvC;aAAM,IAAI,MAAM,CAAC,EAAE,EAAE,SAAS,CAAC,EAAE;YAChC,SAAS,CAAC,IAAI,GAAG,QAAQ,CAAC,CAAC,aAAa;SACzC;aAAM,IAAI,MAAM,CAAC,EAAE,EAAE,SAAS,CAAC,EAAE;YAChC,SAAS,CAAC,IAAI,GAAG,QAAQ,CAAC,CAAC,aAAa;SACzC;KACF;SAAM,IAAI,MAAM,CAAC,EAAE,EAAE,QAAQ,CAAC,IAAI,MAAM,CAAC,EAAE,EAAE,UAAU,CAAC,EAAE;QACzD,MAAM,CAAC,IAAI,GAAG,OAAO,CAAC,CAAC,WAAW;QAClC,SAAS,CAAC,IAAI,GAAG,SAAS,CAAC,CAAC,cAAc;KAC3C;SAAM,IAAI,MAAM,CAAC,EAAE,EAAE,SAAS,CAAC,EAAE;QAChC,MAAM,CAAC,IAAI,GAAG,QAAQ,CAAC,CAAC,YAAY;QACpC,SAAS,CAAC,IAAI,GAAG,OAAO,CAAC,CAAC,YAAY;KACvC;SAAM,IAAI,MAAM,CAAC,EAAE,EAAE,0BAA0B,CAAC,EAAE;QACjD,MAAM,CAAC,IAAI,GAAG,SAAS,CAAC,CAAC,aAAa;QACtC,SAAS,CAAC,IAAI,GAAG,IAAI,CAAC,CAAC,SAAS;KACjC;IAED,SAAS;IACT,IAAI,MAAM,CAAC,IAAI,KAAK,QAAQ,EAAE;QAC5B,MAAM,CAAC,OAAO,GAAG,UAAU,CAAC,EAAE,EAAE,uBAAuB,CAAC,CAAC;KAC1D;SAAM,IAAI,MAAM,CAAC,IAAI,KAAK,OAAO,EAAE;QAClC,MAAM,CAAC,OAAO,GAAG,UAAU,CAAC,EAAE,EAAE,iBAAiB,CAAC,CAAC;KACpD;SAAM,IAAI,MAAM,CAAC,IAAI,KAAK,QAAQ,EAAE;QACnC,MAAM,CAAC,OAAO,GAAG,UAAU,CAAC,EAAE,EAAE,kBAAkB,CAAC,CAAC;KACrD;SAAM,IAAI,MAAM,CAAC,IAAI,KAAK,SAAS,EAAE;QACpC,MAAM,CAAC,OAAO,GAAG,UAAU,CAAC,EAAE,EAAE,mBAAmB,CAAC,CAAC;KACtD;IAED,SAAS;IACT,IAAI,SAAS,CAAC,IAAI,KAAK,QAAQ,EAAE;QAC/B,SAAS,CAAC,OAAO,GAAG,UAAU,CAAC,EAAE,EAAE,kBAAkB,CAAC,CAAC;KACxD;SAAM,IAAI,SAAS,CAAC,IAAI,KAAK,QAAQ,EAAE;QACtC,SAAS,CAAC,OAAO,GAAG,UAAU,CAAC,EAAE,EAAE,mBAAmB,CAAC,CAAC;KACzD;SAAM,IAAI,SAAS,CAAC,IAAI,KAAK,SAAS,EAAE;QACvC,SAAS,CAAC,OAAO,GAAG,UAAU,CAAC,EAAE,EAAE,mBAAmB,CAAC,CAAC;KACzD;SAAM,IAAI,SAAS,CAAC,IAAI,KAAK,OAAO,EAAE;QACrC,SAAS,CAAC,OAAO,GAAG,UAAU,CAAC,EAAE,EAAE,eAAe,CAAC,CAAC;KACrD;SAAM,IAAI,SAAS,CAAC,IAAI,KAAK,IAAI,EAAE;QAClC,SAAS,CAAC,OAAO,GAAG,UAAU,CAAC,EAAE,EAAE,8BAA8B,CAAC,CAAC;KACpE;SAAM,IAAI,SAAS,CAAC,IAAI,KAAK,MAAM,EAAE;QACpC,SAAS,CAAC,OAAO,GAAG,UAAU,CAAC,EAAE,EAAE,gBAAgB,CAAC,CAAC;KACtD;IAED,OAAO;IACP,IAAI,MAAM,CAAC,EAAE,EAAE,gBAAgB,CAAC,EAAE;QAChC,KAAK,CAAC,IAAI,GAAG,WAAW,CAAC,CAAC,UAAU;QACpC,KAAK,CAAC,OAAO,GAAG,UAAU,CAAC,EAAE,EAAE,yBAAyB,CAAC,CAAC;KAC3D;SAAM,IAAI,MAAM,CAAC,EAAE,EAAE,iBAAiB,CAAC,EAAE;QACxC,KAAK,CAAC,IAAI,GAAG,QAAQ,CAAC,CAAC,QAAQ;QAC/B,KAAK,CAAC,OAAO,GAAG,UAAU,CAAC,EAAE,EAAE,0BAA0B,CAAC,CAAC;KAC5D;SAAM,IAAI,MAAM,CAAC,EAAE,EAAE,YAAY,CAAC,EAAE;QACnC,KAAK,CAAC,IAAI,GAAG,IAAI,CAAC,CAAC,SAAS;QAC5B,KAAK,CAAC,OAAO,GAAG,UAAU,CAAC,EAAE,EAAE,qBAAqB,CAAC,CAAC;KACvD;SAAM,IAAI,MAAM,CAAC,EAAE,EAAE,YAAY,CAAC,EAAE;QACnC,KAAK,CAAC,IAAI,GAAG,IAAI,CAAC,CAAC,SAAS;QAC5B,KAAK,CAAC,OAAO,GAAG,UAAU,CAAC,EAAE,EAAE,qBAAqB,CAAC,CAAC;KACvD;SAAM,IAAI,MAAM,CAAC,EAAE,EAAE,0BAA0B,CAAC,EAAE;QACjD,KAAK,CAAC,IAAI,GAAG,cAAc,CAAC;QAC5B,KAAK,CAAC,OAAO,GAAG,UAAU,CAAC,EAAE,EAAE,0BAA0B,CAAC,CAAC;KAC5D;SAAM,IAAI,MAAM,CAAC,EAAE,EAAE,kDAAkD,CAAC,EAAE;QACzE,KAAK,CAAC,IAAI,GAAG,aAAa,CAAC;QAC3B,KAAK,CAAC,OAAO,GAAG,UAAU,CAAC,EAAE,EAAE,kDAAkD,CAAC,CAAC;KACpF;SAAM,IAAI,MAAM,CAAC,EAAE,EAAE,aAAa,CAAC,EAAE;QACpC,KAAK,CAAC,IAAI,GAAG,KAAK,CAAC,CAAC,eAAe;KACpC;SAAM,IAAI,MAAM,CAAC,EAAE,EAAE,eAAe,CAAC,EAAE;QACtC,KAAK,CAAC,IAAI,GAAG,MAAM,CAAC,CAAC,WAAW;QAChC,KAAK,CAAC,OAAO,GAAG,UAAU,CAAC,EAAE,EAAE,wBAAwB,CAAC,CAAC;KAC1D;SAAM,IAAI,MAAM,CAAC,EAAE,EAAE,iCAAiC,CAAC,EAAE;QACxD,KAAK,CAAC,IAAI,GAAG,QAAQ,CAAC,CAAC,QAAQ;QAC/B,KAAK,CAAC,OAAO,GAAG,UAAU,CAAC,EAAE,EAAE,sBAAsB,CAAC,CAAC;KACxD;SAAM,IAAI,MAAM,CAAC,EAAE,EAAE,YAAY,CAAC,EAAE;QACnC,KAAK,CAAC,IAAI,GAAG,QAAQ,CAAC,CAAC,QAAQ;QAC/B,KAAK,CAAC,OAAO,GAAG,UAAU,CAAC,EAAE,EAAE,mBAAmB,CAAC,CAAC;KACrD;SAAM,IAAI,MAAM,CAAC,EAAE,EAAE,UAAU,CAAC,EAAE;QACjC,KAAK,CAAC,IAAI,GAAG,SAAS,CAAC,CAAC,QAAQ;QAChC,KAAK,CAAC,OAAO,GAAG,UAAU,CAAC,EAAE,EAAE,mBAAmB,CAAC,CAAC;KACrD;SAAM,IAAI,MAAM,CAAC,EAAE,EAAE,8BAA8B,CAAC,EAAE;QACrD,KAAK,CAAC,IAAI,GAAG,WAAW,CAAC,CAAC,OAAO;QACjC,KAAK,CAAC,OAAO,GAAG,UAAU,CAAC,EAAE,EAAE,8BAA8B,CAAC,CAAC;KAChE;SAAM,IAAI,MAAM,CAAC,EAAE,EAAE,oBAAoB,CAAC,EAAE;QAC3C,KAAK,CAAC,IAAI,GAAG,OAAO,CAAC,CAAC,QAAQ;QAC9B,KAAK,CAAC,OAAO,GAAG,UAAU,CAAC,EAAE,EAAE,oBAAoB,CAAC,CAAC;KACtD;IAED,OAAO,EAAE,MAAM,QAAA,EAAE,SAAS,WAAA,EAAE,KAAK,OAAA,EAAE,CAAC;AACtC,CAAC;AA9GD,gCA8GC","sourcesContent":["import { getUA } from './getUA';\n\n// 正则 userAgent 校验\nconst testUA = (ua: string, regExp: RegExp) => regExp.test(ua);\n\n// 正则提取版本号\nconst getVersion = (ua: string, regExp: RegExp) => `${ua.match(regExp)}`.replace(/[^0-9|_.]/g, '').replace(/_/g, '.');\n\n/**\n * 浏览器子信息\n */\ntype IBrowserInfoItem = {\n  // 类型\n  type: string;\n  // 版本\n  version: string;\n};\n\n/**\n * 浏览器信息\n */\ntype IBrowserInfo = {\n  // 内核\n  engine: IBrowserInfoItem;\n  // 载体\n  supporter: IBrowserInfoItem;\n  // 外壳\n  shell: IBrowserInfoItem;\n};\n\n/**\n * 获取浏览器信息\n */\nexport function getBrowser(): IBrowserInfo {\n  // userAgent\n  const ua: string = getUA().toLowerCase();\n  // 内核\n  const engine: IBrowserInfoItem = {\n    type: 'unknown',\n    version: 'unknown'\n  };\n  // 载体\n  const supporter: IBrowserInfoItem = {\n    type: 'unknown',\n    version: 'unknown'\n  };\n  // 外壳\n  const shell: IBrowserInfoItem = {\n    type: 'unknown',\n    version: 'unknown'\n  };\n\n  // 判断内核，载体类型\n  if (testUA(ua, /applewebkit/g)) {\n    engine.type = 'webkit'; // webkit 内核\n    if (testUA(ua, /edge/g)) {\n      supporter.type = 'edge'; // edge 浏览器\n    } else if (testUA(ua, /opr/g)) {\n      supporter.type = 'opera'; // opera 浏览器\n    } else if (testUA(ua, /chrome/g)) {\n      supporter.type = 'chrome'; // chrome 浏览器\n    } else if (testUA(ua, /safari/g)) {\n      supporter.type = 'safari'; // safari 浏览器\n    }\n  } else if (testUA(ua, /gecko/g) && testUA(ua, /firefox/g)) {\n    engine.type = 'gecko'; // gecko 内核\n    supporter.type = 'firefox'; // firefox 浏览器\n  } else if (testUA(ua, /presto/g)) {\n    engine.type = 'presto'; // presto 内核\n    supporter.type = 'opera'; // opera 浏览器\n  } else if (testUA(ua, /trident|compatible|msie/g)) {\n    engine.type = 'trident'; // trident 内核\n    supporter.type = 'ie'; // ie 浏览器\n  }\n\n  // 判断内核版本\n  if (engine.type === 'webkit') {\n    engine.version = getVersion(ua, /applewebkit\\/[\\d._]+/g);\n  } else if (engine.type === 'gecko') {\n    engine.version = getVersion(ua, /gecko\\/[\\d._]+/g);\n  } else if (engine.type === 'presto') {\n    engine.version = getVersion(ua, /presto\\/[\\d._]+/g);\n  } else if (engine.type === 'trident') {\n    engine.version = getVersion(ua, /trident\\/[\\d._]+/g);\n  }\n\n  // 判断载体版本\n  if (supporter.type === 'chrome') {\n    supporter.version = getVersion(ua, /chrome\\/[\\d._]+/g);\n  } else if (supporter.type === 'safari') {\n    supporter.version = getVersion(ua, /version\\/[\\d._]+/g);\n  } else if (supporter.type === 'firefox') {\n    supporter.version = getVersion(ua, /firefox\\/[\\d._]+/g);\n  } else if (supporter.type === 'opera') {\n    supporter.version = getVersion(ua, /opr\\/[\\d._]+/g);\n  } else if (supporter.type === 'ie') {\n    supporter.version = getVersion(ua, /(msie [\\d._]+)|(rv:[\\d._]+)/g);\n  } else if (supporter.type === 'edge') {\n    supporter.version = getVersion(ua, /edge\\/[\\d._]+/g);\n  }\n\n  // 判断外壳\n  if (testUA(ua, /WindowsWechat/g)) {\n    shell.type = 'wechat pc'; // 微信PC浏览器\n    shell.version = getVersion(ua, /windowswechat\\/[\\d._]+/g);\n  } else if (testUA(ua, /micromessenger/g)) {\n    shell.type = 'wechat'; // 微信浏览器\n    shell.version = getVersion(ua, /micromessenger\\/[\\d._]+/g);\n  } else if (testUA(ua, /qqbrowser/g)) {\n    shell.type = 'qq'; // QQ 浏览器\n    shell.version = getVersion(ua, /qqbrowser\\/[\\d._]+/g);\n  } else if (testUA(ua, /ucbrowser/g)) {\n    shell.type = 'uc'; // UC 浏览器\n    shell.version = getVersion(ua, /ucbrowser\\/[\\d._]+/g);\n  } else if (testUA(ua, /360se(?:[ \\/]([\\w.]+))?/g)) {\n    shell.type = '360 security';\n    shell.version = getVersion(ua, /360se(?:[ \\/]([\\w.]+))?/g);\n  } else if (testUA(ua, /360.s*aphone\\s*browser\\s*\\(version\\s*([\\w.]+)\\)/g)) {\n    shell.type = '360 browser';\n    shell.version = getVersion(ua, /360.s*aphone\\s*browser\\s*\\(version\\s*([\\w.]+)\\)/g);\n  } else if (testUA(ua, /qihu 360se/g)) {\n    shell.type = '360'; // 360 浏览器(无版本)\n  } else if (testUA(ua, /2345explorer/g)) {\n    shell.type = '2345'; // 2345 浏览器\n    shell.version = getVersion(ua, /2345explorer\\/[\\d._]+/g);\n  } else if (testUA(ua, /(metasr)|(sogou\\w+\\/([0-9.]+))/g)) {\n    shell.type = 'sougou'; // 搜狗浏览器\n    shell.version = getVersion(ua, /sogou\\w+\\/([0-9.]+)/g);\n  } else if (testUA(ua, /lbbrowser/g)) {\n    shell.type = 'liebao'; // 猎豹浏览器\n    shell.version = getVersion(ua, /LieBao\\/([\\w.]+)/g);\n  } else if (testUA(ua, /maxthon/g)) {\n    shell.type = 'maxthon'; // 遨游浏览器\n    shell.version = getVersion(ua, /maxthon\\/[\\d._]+/g);\n  } else if (testUA(ua, /the world(?:[ \\/]([\\w.]+))?/g)) {\n    shell.type = 'the world'; // 世界之窗\n    shell.version = getVersion(ua, /the world(?:[ \\/]([\\w.]+))?/g);\n  } else if (testUA(ua, /flyflow\\/([\\w.]+)/g)) {\n    shell.type = 'baidu'; // 百度浏览器\n    shell.version = getVersion(ua, /flyflow\\/([\\w.]+)/g);\n  }\n\n  return { engine, supporter, shell };\n}\n"]}
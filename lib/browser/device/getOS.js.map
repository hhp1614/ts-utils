{"version":3,"file":"getOS.js","sourceRoot":"","sources":["../../../src/browser/device/getOS.ts"],"names":[],"mappings":"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","sourcesContent":["import { getUA } from './getUA';\n\n// 正则 userAgent 校验\nconst testUA = (ua: string, regExp: RegExp) => regExp.test(ua);\n\n// 正则提取版本号\nconst getVersion = (ua: string, regExp: RegExp) => `${ua.match(regExp)}`.replace(/[^0-9|_.]/g, '').replace(/_/g, '.');\n\n/**\n * 系统信息\n */\ntype SystemInfo = {\n  // 系统类型\n  type: string;\n  // 系统版本\n  version: string;\n  // 系统平台\n  platform: string;\n};\n\n/**\n * 获取操作系统信息\n */\nexport function getOS(): SystemInfo {\n  // userAgent\n  const ua: string = getUA().toLowerCase();\n  // 类型\n  let type: string = 'unknown';\n  // 版本\n  let version: string = 'unknown';\n  // 平台\n  let platform: string = 'unknown';\n\n  // 判断类型\n  if (testUA(ua, /windows|win32|win64|wow32|wow64/g)) type = 'windows';\n  else if (testUA(ua, /macintosh|macintel/g)) type = 'mac';\n  else if (testUA(ua, /x11/g)) type = 'linux';\n  else if (testUA(ua, /android|adr/g)) type = 'android';\n  else if (testUA(ua, /ios|iphone|ipad|ipod|iwatch/g)) type = 'ios';\n\n  // 判断版本\n  if (type === 'windows') {\n    if (testUA(ua, /windows nt 10.0|windows 10/g)) version = '10';\n    else if (testUA(ua, /windows nt 6.3|windows 8.1/g)) version = '8.1';\n    else if (testUA(ua, /windows nt 6.2|windows 8/g)) version = '8';\n    else if (testUA(ua, /windows nt 6.1|windows 7/g)) version = '7';\n    else if (testUA(ua, /windows nt 6.0|windows vista/g)) version = 'vista';\n    else if (testUA(ua, /windows nt 5.2|windows 2003/g)) version = '2003';\n    else if (testUA(ua, /windows nt 5.1|windows xp/g)) version = 'xp';\n    else if (testUA(ua, /windows nt 5.0|windows 2000/g)) version = '2000';\n  } else if (type === 'mac') {\n    version = getVersion(ua, /os x [\\d._]+/g);\n  } else if (type === 'android') {\n    version = getVersion(ua, /android [\\d._]+/g);\n  } else if (type === 'ios') {\n    version = getVersion(ua, /os [\\d._]+/g);\n  }\n\n  // 判断平台\n  if (type === 'android' || type === 'ios' || testUA(ua, /mobile/g)) {\n    platform = 'mobile'; // 移动端\n  } else if (type === 'windows' || type === 'mac' || type === 'linux') {\n    platform = 'desktop'; // 桌面端\n  }\n\n  return { type, version, platform };\n}\n"]}
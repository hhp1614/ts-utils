{"version":3,"file":"timeFormat.js","sourceRoot":"","sources":["../../../src/common/time/timeFormat.ts"],"names":[],"mappings":";;;AAAA,gCAAmC;AAmBnC;;;;GAIG;AACH,SAAgB,UAAU,CAAC,IAAyC,EAAE,MAA8B;IAAzE,qBAAA,EAAA,WAAmC,IAAI,EAAE;IAAE,uBAAA,EAAA,8BAA8B;IAClG,IAAM,CAAC,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,CAAC;IAEzB,IAAI,CAAC,CAAC,YAAY,EAAE,KAAK,cAAc,EAAE;QACvC,MAAM,IAAI,KAAK,CAAC,wBAAwB,CAAC,CAAC;KAC3C;IACD,IAAI,CAAC,eAAQ,CAAC,MAAM,CAAC,EAAE;QACrB,MAAM,IAAI,SAAS,CAAC,iBAAiB,CAAC,CAAC;KACxC;IAED,IAAM,CAAC,GAAe;QACpB,IAAI,EAAE,MAAM,CAAC,CAAC,CAAC,WAAW,EAAE,CAAC;QAC7B,KAAK,EAAE,MAAM,CAAC,CAAC,CAAC,QAAQ,EAAE,GAAG,CAAC,CAAC;QAC/B,IAAI,EAAE,MAAM,CAAC,CAAC,CAAC,OAAO,EAAE,CAAC;QACzB,IAAI,EAAE,MAAM,CAAC,CAAC,CAAC,QAAQ,EAAE,CAAC;QAC1B,OAAO,EAAE,MAAM,CAAC,CAAC,CAAC,UAAU,EAAE,CAAC;QAC/B,OAAO,EAAE,MAAM,CAAC,CAAC,CAAC,UAAU,EAAE,CAAC;QAC/B,YAAY,EAAE,MAAM,CAAC,CAAC,CAAC,eAAe,EAAE,CAAC;KAC1C,CAAC;IAEF,OAAO,MAAM,CAAC,OAAO,CAAC,oCAAoC,EAAE,UAAA,GAAG;QAC7D,QAAQ,GAAG,EAAE;YACX,KAAK,MAAM;gBACT,OAAO,CAAC,CAAC,IAAI,CAAC;YAChB,KAAK,IAAI;gBACP,OAAO,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;YAC3B,KAAK,IAAI;gBACP,OAAO,CAAC,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC;YAClC,KAAK,GAAG;gBACN,OAAO,CAAC,CAAC,KAAK,CAAC;YACjB,KAAK,IAAI;gBACP,OAAO,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC;YACjC,KAAK,GAAG;gBACN,OAAO,CAAC,CAAC,IAAI,CAAC;YAChB,KAAK,IAAI;gBACP,OAAO,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC;YACjC,KAAK,GAAG;gBACN,OAAO,CAAC,CAAC,IAAI,CAAC;YAChB,KAAK,IAAI;gBACP,OAAO,CAAC,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC;YACpC,KAAK,GAAG;gBACN,OAAO,CAAC,CAAC,OAAO,CAAC;YACnB,KAAK,IAAI;gBACP,OAAO,CAAC,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC;YACpC,KAAK,GAAG;gBACN,OAAO,CAAC,CAAC,OAAO,CAAC;YACnB,KAAK,IAAI;gBACP,OAAO,CAAC,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC;YACzC,KAAK,GAAG;gBACN,OAAO,CAAC,CAAC,YAAY,CAAC;SACzB;QACD,OAAO,GAAG,CAAC;IACb,CAAC,CAAC,CAAC;AACL,CAAC;AArDD,gCAqDC","sourcesContent":["import { isString } from '../type';\r\n\r\ntype TimeObject = {\r\n  // 年\r\n  year: string;\r\n  // 月\r\n  month: string;\r\n  // 日\r\n  date: string;\r\n  // 时\r\n  hour: string;\r\n  // 分\r\n  minutes: string;\r\n  // 秒\r\n  seconds: string;\r\n  // 毫秒\r\n  milliseconds: string;\r\n};\r\n\r\n/**\r\n * 时间格式化\r\n * @param time 时间对象、时间戳、可转换为时间对象字符串\r\n * @param format 格式，默认：`YYYY-MM-DD hh:mm:ss`\r\n */\r\nexport function timeFormat(time: Date | number | string = new Date(), format = 'YYYY-MM-DD hh:mm:ss') {\r\n  const D = new Date(time);\r\n\r\n  if (D.toDateString() === 'Invalid Date') {\r\n    throw new Error('`time` 无法转化为有效 Date 对象');\r\n  }\r\n  if (!isString(format)) {\r\n    throw new TypeError('`format` 必须是字符串');\r\n  }\r\n\r\n  const t: TimeObject = {\r\n    year: String(D.getFullYear()),\r\n    month: String(D.getMonth() + 1),\r\n    date: String(D.getDate()),\r\n    hour: String(D.getHours()),\r\n    minutes: String(D.getMinutes()),\r\n    seconds: String(D.getSeconds()),\r\n    milliseconds: String(D.getMilliseconds())\r\n  };\r\n\r\n  return format.replace(/(YY(YY)?|MM?|DD?|hh?|mm?|ss?|SS?)/g, str => {\r\n    switch (str) {\r\n      case 'YYYY':\r\n        return t.year;\r\n      case 'YY':\r\n        return t.year.substr(-2);\r\n      case 'MM':\r\n        return t.month.padStart(2, '0');\r\n      case 'M':\r\n        return t.month;\r\n      case 'DD':\r\n        return t.date.padStart(2, '0');\r\n      case 'D':\r\n        return t.date;\r\n      case 'hh':\r\n        return t.hour.padStart(2, '0');\r\n      case 'h':\r\n        return t.hour;\r\n      case 'mm':\r\n        return t.minutes.padStart(2, '0');\r\n      case 'm':\r\n        return t.minutes;\r\n      case 'ss':\r\n        return t.seconds.padStart(2, '0');\r\n      case 's':\r\n        return t.seconds;\r\n      case 'SS':\r\n        return t.milliseconds.padStart(3, '0');\r\n      case 'S':\r\n        return t.milliseconds;\r\n    }\r\n    return str;\r\n  });\r\n}\r\n"]}